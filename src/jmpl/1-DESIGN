
1. JSON template directives
---------------------------

- preprocessor-like:
     o if-set-endif
         {if-set: <jsonexpr> body}
     o if-<testexpr>-endif
         {if: {<testexpr>} body}
         test operators: ==, !=

- substitutions
     o simple JSON value substitution
         {variable}
     o foreach: for arrays and objects
         {foreach: [key:]val in body}
     o foreach-specific extra tests:
         {isfirst: body}
         {notfirst: body}
         {islast: body}
         {notlast: body}





X. Example
----------

{ }
[Unit]
SourcePath={source}
Description={description}

[Service]
{foreach key:val in environment}
Environment={key}={val}
{end}
{if-set prepare.directories}
  ExecStartPre=/bin/mkdir -p {foreach d in prepare.directories}
                                {d}{notlast:../}
                             {end}
{end}

ExecStartPre=/bin/mkdir -p
ExecStartPre=...
Type=notify
